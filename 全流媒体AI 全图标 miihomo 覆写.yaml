port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: :9090
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip

  # 不指定国内 DNS，让系统默认去解析国内域名
  nameserver:
    - system

  # 国外 DNS（防污染，用加密 DNS）
  fallback:
    - https://1.1.1.1/dns-query
    - https://1.0.0.1/dns-query
    - https://dns.google/dns-query
    - tls://1.1.1.1:853
    - tls://dns.google:853
# —— fake-ip 过滤，避免国内银行/支付/系统更新误走代理 ——
fake-ip-filter:
  # 常见支付/银行
  - '*.alipay.com'
  - '*.alipayobjects.com'
  - '*.taobao.com'
  - '*.tmall.com'
  - '*.jd.com'
  - '*.bankcomm.com'
  - '*.cmbchina.com'
  - '*.cmbc.com.cn'
  - '*.icbc.com.cn'
  - '*.ccb.com'
  - '*.abchina.com'
  - '*.boc.cn'
  - '*.pingan.com'
  - '*.cib.com.cn'
  - '*.psbc.com'
  - '*.unionpay.com'
  - '*.unionpayintl.com'

  # 微信 / QQ / 腾讯支付
  - '*.weixin.qq.com'
  - '*.wx.qq.com'
  - '*.tenpay.com'
  - '*.qq.com'
  - '*.qpic.cn'
  - '*.gtimg.cn'

  # 国内常见域名
  - 'localhost'
  - '*.lan'
  - '*.local'
  - '*.cn'
  - '*.126.net'
  - '*.163.com'
  - '*.sogou.com'
  - '*.youku.com'
  - '*.baidu.com'
  - '*.bilibili.com'

  # 系统更新/大厂服务
  - '*.apple.com'
  - '*.icloud.com'
  - '*.icloud-content.com'
  - '*.mzstatic.com'
  - '*.windowsupdate.com'
  - '*.microsoft.com'
  - '*.office.com'
  - '*.msftconnecttest.com'
  - '*.msftncsi.com'
  - '*.gstatic.com'
  - '*.google.cn'
  
rule-providers:
  ad_banad:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
    path: ./ruleset/banad.list
    interval: 86400
  ad_banprogramad:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list
    path: ./ruleset/banprogramad.list
    interval: 86400
  ad_easylist:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyList.list
    path: ./ruleset/baneasylist.list
    interval: 86400
  ad_easylist_cn:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyListChina.list
    path: ./ruleset/baneasylistchina.list
    interval: 86400

  privacy:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy_Classical.yaml
    path: ./ruleset/privacy.yaml
    interval: 86400

  primevideo:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PrimeVideo/PrimeVideo.yaml
    path: ./ruleset/primevideo.yaml
    interval: 86400
  paramountplus:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ParamountPlus/ParamountPlus.yaml
    path: ./ruleset/paramountplus.yaml
    interval: 86400
  hulu:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Hulu/Hulu.yaml
    path: ./ruleset/hulu.yaml
    interval: 86400
  hulu_jp:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HuluJP/HuluJP.yaml
    path: ./ruleset/hulujp.yaml
    interval: 86400
  hulu_usa:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HuluUSA/HuluUSA.yaml
    path: ./ruleset/huluusa.yaml
    interval: 86400

  hbo_hk:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBOHK/HBOHK.yaml
    path: ./ruleset/hbohk.yaml
    interval: 86400
  hbo_asia:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBOAsia/HBOAsia.yaml
    path: ./ruleset/hboasia.yaml
    interval: 86400
  hbo_usa:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBOUSA/HBOUSA.yaml
    path: ./ruleset/hbousa.yaml
    interval: 86400
  hbo_all:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBO/HBO.yaml
    path: ./ruleset/hbo.yaml
    interval: 86400

  onedrive:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.yaml
    path: ./ruleset/onedrive.yaml
    interval: 86400
  microsoft:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
    path: ./ruleset/microsoft.yaml
    interval: 86400
  apple:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml
    path: ./ruleset/apple.yaml
    interval: 86400

  telegram:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
    path: ./ruleset/telegram.yaml
    interval: 86400
  game:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml
    path: ./ruleset/game.yaml
    interval: 86400

  youtube:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
    path: ./ruleset/youtube.yaml
    interval: 86400
  netflix:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml
    path: ./ruleset/netflix.yaml
    interval: 86400
  disneyplus:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.yaml
    path: ./ruleset/disney.yaml
    interval: 86400
  emby:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/justdoiting/ClashRule/main/Emby.yaml
    path: ./ruleset/emby.yaml
    interval: 86400
  bahamut:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml
    path: ./ruleset/bahamut.yaml
    interval: 86400
  bilibili_intl:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBiliIntl/BiliBiliIntl.yaml
    path: ./ruleset/bilibili_intl.yaml
    interval: 86400
  bilibili:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml
    path: ./ruleset/bilibili.yaml
    interval: 86400
  spotify:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
    path: ./ruleset/spotify.yaml
    interval: 86400
  tiktok:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml
    path: ./ruleset/tiktok.yaml
    interval: 86400

  # === 新增：AI 规则源 ===
  openai:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    path: ./ruleset/openai.yaml
    interval: 86400
  anthropic:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Anthropic/Anthropic.yaml
    path: ./ruleset/anthropic.yaml
    interval: 86400
  gemini:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml
    path: ./ruleset/gemini.yaml
    interval: 86400
  copilot:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml
    path: ./ruleset/copilot.yaml
    interval: 86400

  outside_cutethotw:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/cutethotw/ClashRule/main/Outside.list
    path: ./ruleset/outside1.list
    interval: 86400
  outside_gfw_acl4ssr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
    path: ./ruleset/outside2.list
    interval: 86400
  outside_bm7_proxy:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Proxy/Proxy.list
    path: ./ruleset/outside3.list
    interval: 86400

  global_media:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.yaml
    path: ./ruleset/global_media.yaml
    interval: 86400
  cn_media:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.yaml
    path: ./ruleset/cn_media.yaml
    interval: 86400

  inside_cutethotw:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/cutethotw/ClashRule/main/Inside.list
    path: ./ruleset/inside1.list
    interval: 86400
  lan_acl4ssr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
    path: ./ruleset/lan.list
    interval: 86400
  unban_acl4ssr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
    path: ./ruleset/unban.list
    interval: 86400
  google_cn_acl4ssr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list
    path: ./ruleset/googlecn.list
    interval: 86400
  china_ip_acl4ssr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list
    path: ./ruleset/chinaip.list
    interval: 86400
  china_domain_acl4ssr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
    path: ./ruleset/chinadomain.list
    interval: 86400
  china_company_ip_acl4ssr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
    path: ./ruleset/chinacompanyip.list
    interval: 86400
  download_acl4ssr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Download.list
    path: ./ruleset/download.list
    interval: 86400

  anti_ip_attr:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/lwd-temp/anti-ip-attribution/main/generated/rule-provider.yaml
    path: ./ruleset/anti_ip_attr.yaml
    interval: 86400

  geoip2_cn_ipcidr:
    type: http
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/soffchen/GeoIP2-CN@release/clash-rule-provider.yml
    path: ./ruleset/geoip2_cn.yml
    interval: 86400

proxy-groups:
  - name: 国外流量
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Proxy.png
    proxies:
      - 自动选择
      - 故障转移
      - 负载均衡
      - 手动选择1
      - 手动选择2
      - 新加坡节点
      - 香港节点
      - 台湾节点
      - 日本节点
      - 美国节点
      - 韩国节点
      - 印度节点
      - 英国节点
      - 法国节点
      - 俄罗斯节点
      - 德国节点

  - name: 手动选择1
    type: select
    icon: https://testingcf.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/select.png
    include-all: true

  - name: 手动选择2
    type: select
    icon: https://testingcf.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/select.png
    include-all: true

  - name: 漏网之鱼
    type: select
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cat.png
    proxies:
      - 自动选择
      - 国外流量
      - 国内流量
      - 手动选择1
      - 手动选择2
      - 故障转移
      - 负载均衡

  - name: 免流
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Flamingo.png
    include-all: true
    filter: "(80|443|TCP|浙停|广停|绿通)"

  - name: 自动选择
    type: url-test
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Auto.png
    include-all: true
    url: https://i.ytimg.com/generate_204
    interval: 180
    tolerance: 50
    filter: "^(?!.*(剩余流量|到期时间|过期时间|官网地址|产品名称|先购买套餐|流量消耗|唯一官网|更新订阅)).*"

  - name: 故障转移
    type: fallback
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png
    include-all: true
    url: https://i.ytimg.com/generate_204
    interval: 300
    tolerance: 50
    filter: "^(?!.*(剩余流量|到期时间|过期时间|官网地址|产品名称|先购买套餐|流量消耗|唯一官网|更新订阅)).*"

  - name: 负载均衡
    type: load-balance
    strategy: consistent-hashing
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final_1.png
    include-all: true
    url: https://i.ytimg.com/generate_204
    interval: 300
    tolerance: 50
    filter: "^(?!.*(剩余流量|到期时间|过期时间|官网地址|产品名称|先购买套餐|流量消耗|唯一官网|更新订阅)).*"

  # === 新增：AI 服务分流组 ===
  - name: AI服务
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/ChatGPT.png
    proxies:
      - 国外流量
      - 自动选择
      - 新加坡节点
      - 香港节点
      - 台湾节点
      - 日本节点
      - 美国节点
      - 韩国节点
      - 英国节点
      - 德国节点
      - 手动选择1
      - 手动选择2
      - 故障转移
      - 负载均衡

  - { name: Telegram,       type: select, icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png, proxies: [国外流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: Bilibili,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/bilibili.png, proxies: [国内流量, 香港节点, 台湾节点] }
  - { name: YouTube,        type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2, 故障转移, 负载均衡] }
  - { name: ParamountPlus,  type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Paramount.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: Hulu,           type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hulu_1.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: PrimeVideo,     type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Prime_Video.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: HBO,            type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/HBO_Max.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: 社交平台IP归属地, type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Instagram.png, proxies: [DIRECT, 国内流量, 国外流量, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: Netflix,        type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netflix.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: DisneyPlus,     type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Disney+_1.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: EMBY,           type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Emby.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: TikTok,         type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/TikTok.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: Spotify,        type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Spotify.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: 巴哈姆特,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bahamut.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: 国外媒体,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/ForeignMedia.png, proxies: [国外流量, 国内流量, 自动选择, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点, 手动选择1, 手动选择2] }
  - { name: 国内媒体,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/DomesticMedia.png, proxies: [国内流量, 手动选择1, 手动选择2] }
  - { name: 微软云盘,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/OneDrive.png, proxies: [国内流量, 国外流量, 手动选择1, 手动选择2] }
  - { name: 微软服务,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Microsoft.png, proxies: [国内流量, 国外流量, 手动选择1, 手动选择2] }
  - { name: 苹果服务,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Apple.png, proxies: [国内流量, 国外流量, 手动选择1, 手动选择2] }
  - { name: 游戏平台,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Game.png, proxies: [国内流量, 国外流量, 手动选择1, 手动选择2, 新加坡节点, 香港节点, 台湾节点, 日本节点, 美国节点, 韩国节点, 印度节点, 英国节点, 法国节点, 俄罗斯节点, 德国节点] }
  - { name: 国内流量,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/China.png, proxies: [DIRECT, 免流, 手动选择1, 手动选择2] }
  - { name: 广告拦截,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/AdBlack.png, proxies: [REJECT, 国内流量, 手动选择1, 手动选择2] }
  - { name: 应用净化,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hijacking.png, proxies: [REJECT, 国内流量, 手动选择1, 手动选择2] }
  - { name: AdBlock,        type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Advertising.png, proxies: [REJECT, 国内流量, 手动选择1, 手动选择2] }
  - { name: 隐私防护,       type: select, icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Blackhole.png, proxies: [REJECT, 国内流量, 手动选择1, 手动选择2] }

  # —— 地区分组（用正则圈定候选节点） —— 
  - name: 香港节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png
    include-all: true
    filter: "(🇭🇰|港|HK|Hong Kong)"
  - name: 日本节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png
    include-all: true
    filter: "(🇯🇵|日本|川日|东京|大阪|泉日|埼玉|沪日|深日|[^-]日|JP|Japan)"
  - name: 美国节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png
    include-all: true
    filter: "(🇺🇸|美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United States)"
  - name: 台湾节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png
    include-all: true
    filter: "(台|新北|彰化|TW|Taiwan)"
  - name: 新加坡节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png
    include-all: true
    filter: "(🇸🇬|新加坡|坡|狮城|SG|Singapore)"
  - name: 韩国节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Korea.png
    include-all: true
    filter: "(🇰🇷|KR|Korea|KOR|首尔|韩|韓)"
  - name: 德国节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Germany.png
    include-all: true
    filter: "(🇩🇪|德国|DE|Germany)"
  - name: 英国节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_Kingdom.png
    include-all: true
    filter: "(🇬🇧|英|伦敦|UK|U\\.K|United Kingdom)"
  - name: 俄罗斯节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Russia.png
    include-all: true
    filter: "(俄|🇷🇺|RU|Russian|Moscow)"
  - name: 法国节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/France.png
    include-all: true
    filter: "(法|🇫🇷|FRA|巴黎|Paris)"
  - name: 印度节点
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/India.png
    include-all: true
    filter: "(🇮🇳|印|印度|IN|India)"

rules:
  # —— 先把 ofiii.com 强制走巴哈姆特 —— 
  - DOMAIN-SUFFIX,ofiii.com,巴哈姆特
  - DOMAIN-SUFFIX,ntd-tgc.cdn.hinet.net,巴哈姆特

  # 去广告/净化/隐私
  - RULE-SET,ad_banad,广告拦截
  - RULE-SET,ad_banprogramad,应用净化
  - RULE-SET,ad_easylist,AdBlock
  - RULE-SET,ad_easylist_cn,AdBlock
  - RULE-SET,privacy,隐私防护

  # 流媒体 / 平台
  - RULE-SET,primevideo,PrimeVideo
  - RULE-SET,paramountplus,ParamountPlus
  - RULE-SET,hulu,Hulu
  - RULE-SET,hulu_jp,Hulu
  - RULE-SET,hulu_usa,Hulu
  - RULE-SET,hbo_hk,HBO
  - RULE-SET,hbo_asia,HBO
  - RULE-SET,hbo_usa,HBO
  - RULE-SET,hbo_all,HBO
  - RULE-SET,onedrive,微软云盘
  - RULE-SET,microsoft,微软服务
  - RULE-SET,apple,苹果服务
  - RULE-SET,telegram,Telegram
  - RULE-SET,game,游戏平台
  - RULE-SET,youtube,YouTube
  - RULE-SET,netflix,Netflix
  - RULE-SET,disneyplus,DisneyPlus
  - RULE-SET,emby,EMBY
  - RULE-SET,bahamut,巴哈姆特
  - RULE-SET,bilibili_intl,Bilibili
  - RULE-SET,bilibili,Bilibili
  - RULE-SET,spotify,Spotify
  - RULE-SET,tiktok,TikTok

  # === 新增：AI 服务分流（放在国外/国内媒体之前，确保优先级） ===
  - RULE-SET,openai,AI服务
  - RULE-SET,anthropic,AI服务
  - RULE-SET,gemini,AI服务
  - RULE-SET,copilot,AI服务

  # 国外/国内媒体
  - RULE-SET,global_media,国外媒体
  - RULE-SET,cn_media,国内媒体

  # 国外流量（多源合并）
  - RULE-SET,outside_cutethotw,国外流量
  - RULE-SET,outside_gfw_acl4ssr,国外流量
  - RULE-SET,outside_bm7_proxy,国外流量

  # 国内流量（多源合并）
  - RULE-SET,inside_cutethotw,国内流量
  - RULE-SET,lan_acl4ssr,国内流量
  - RULE-SET,unban_acl4ssr,国内流量
  - RULE-SET,google_cn_acl4ssr,国内流量
  - RULE-SET,china_ip_acl4ssr,国内流量
  - RULE-SET,china_domain_acl4ssr,国内流量
  - RULE-SET,china_company_ip_acl4ssr,国内流量
  - RULE-SET,download_acl4ssr,国内流量

  # 社交平台 IP 归属地伪装
  - RULE-SET,anti_ip_attr,社交平台IP归属地

  # 中国 IP CIDR（GeoIP2 CN）
  - RULE-SET,geoip2_cn_ipcidr,国内流量

  # 兜底
  - MATCH,漏网之鱼
